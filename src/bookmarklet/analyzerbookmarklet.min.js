!function(){if(location.href.indexOf("mousehuntgame.com")<0)alert("You are not on mousehuntgame.com! Please try again.");else{var a="https://tsitu.github.io/MH-Tools/analyzer.html?data=",r="div.history-details .dataTable .sell",s="div.history-details .dataTable .buy";if(null!=document.querySelector("div.history-details .paginate_button.current")){var t=parseInt(document.querySelector("div.history-details .paginate_button.current").innerHTML),e=document.querySelector("div.history-details .dataTables_info").innerHTML,n=e.slice(e.indexOf("of")+3,e.length),o=parseInt(n.slice(0,n.indexOf("entries")).replace(/,/g,"")),u=Math.ceil(o/10),c=u-t+1;console.log("Total Pages: "+u+" | Iterations: "+c);var d=0,h="",m="",l="",y=window.open("","mhanalyzer");y.location="https://tsitu.github.io/MH-Tools/analyzerwaiting.html",g()}else alert("Please navigate to Marketplace -> My History")}function g(){m=setInterval(function(){l!=document.querySelector("div.history-details .dataTables_info").innerHTML&&(l=document.querySelector("div.history-details .dataTables_info").innerHTML,clearTimeout(h),clearInterval(m),function(){var t=document.querySelector("div.history-details .paginate_button.next");if(t.className.indexOf("disabled")<0||parseInt(document.querySelector("div.history-details .paginate_button.current").innerHTML)==u){for(var e=document.querySelectorAll(r+" .sorting_1, "+r+" .item-name, "+r+" .numeric.quantity, "+r+" .numeric, "+r+" .numeric.total"),n=document.querySelectorAll(s+" .sorting_1, "+s+" .item-name, "+s+" .numeric.quantity, "+s+" .numeric, "+s+" .numeric.total"),o=[],l=[],i=0;i<e.length/5;i++)0==i?o.push("Sell "+e[i].textContent+" "+e[i+1].textContent.split(" ").length+" "+e[i+1].textContent+" "+e[i+2].textContent+" "+e[i+3].textContent+" "+e[i+4].textContent):o.push("Sell "+e[5*i].textContent+" "+e[5*i+1].textContent.split(" ").length+" "+e[5*i+1].textContent+" "+e[5*i+2].textContent+" "+e[5*i+3].textContent+" "+e[5*i+4].textContent);for(i=0;i<n.length/5;i++)0==i?l.push("Buy "+n[i].textContent+" "+n[i+1].textContent.split(" ").length+" "+n[i+1].textContent+" "+n[i+2].textContent+" "+n[i+3].textContent+" "+n[i+4].textContent):l.push("Buy "+n[5*i].textContent+" "+n[5*i+1].textContent.split(" ").length+" "+n[5*i+1].textContent+" "+n[5*i+2].textContent+" "+n[5*i+3].textContent+" "+n[5*i+4].textContent);0<o.length&&(a+=encodeURI(o.join("/")),a+="/"),0<l.length&&(a+=encodeURI(l.join("/")),a+="/"),++d==c?(console.log("Parse complete!"),a+="&isDone=true",y.location=a,clearTimeout(h),clearInterval(m)):(d%2==0&&(a+="&isDone=false",y.location=a,a="https://tsitu.github.io/MH-Tools/analyzer.html?data="),t.click(),g())}else null==t?console.log("Next button is null."):null==document.querySelector("div.history-details .paginate_button.current")?console.log("Current button is null."):console.log("Unknown error.")}())},100),h=setTimeout(function(){y.close(),clearInterval(m),alert("Parse timed out! Please check your connection and try again.")},4e3)}}();