!function(){function e(e,t){var n=c+"?"+e+"=";n+=encodeURIComponent(t.join("/")),n+="/",P.location.href=n}function t(){function e(){var e=document.querySelectorAll(".campPage-trap-itemBrowser-items .campPage-trap-itemBrowser-item-name");return Array.prototype.map.call(e,function(e){return e.textContent}).filter(function(e,t,n){return t==n.indexOf(e)})}d.click(),s=e(),console.log("Number of bases: "+s.length),y.click(),m=e(),console.log("Number of weapons: "+m.length),w.click(),g=e(),console.log("Number of charms: "+g.length);var t=document.querySelector("a.campPage-trap-blueprint-closeButton");t&&t.click(),h=0,p=0,f=0,setTimeout(n,l)}function n(){r(function(){h<s.length?(e("bases",s.slice(h,h+u)),h+=u,setTimeout(n,l)):o()})}function o(){r(function(){p<m.length?(e("weapons",m.slice(p,p+u)),p+=u,setTimeout(o,l)):a()})}function a(){r(function(){f<g.length?(e("charms",g.slice(f,f+u)),f+=u,setTimeout(a,l)):P.location.href=c})}function r(e){var t=setTimeout(function(){throw P.close(),alert("Ping XHR timed out! Please check your connection and try again."),new Error("Ping XHR timed out! Please check your connection and try again.")},i),n=(new Date).getTime(),o="?nnn="+n,a=new XMLHttpRequest;a.open("GET","//www.mousehuntgame.com"+o,!0),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){clearTimeout(t);var o=(new Date).getTime()-n;console.log("Ping time: "+o+"ms"),e&&e()}};try{a.send(null)}catch(e){console.log("Exception:",e)}}if(location.href.indexOf("mousehuntgame.com")<0)alert("You are not on mousehuntgame.com! Please try again.");else{var c="https://tsitu.github.io/MH-Tools/setup.html",i=4e3,u=30,l=500,s=[],m=[],g=[],h=0,p=0,f=0,d=document.querySelector("a.campPage-trap-armedItem.base"),y=document.querySelector("a.campPage-trap-armedItem.weapon"),w=document.querySelector("a.campPage-trap-armedItem.trinket"),P=window.open("","mhsetup");if(P.location=c,!(d&&y&&w))throw P.close(),alert("Please ensure that you have FreshCoat enabled in Support -> User Preferences, then navigate to the Camp page!"),new Error("Please ensure that you have FreshCoat enabled in Support -> User Preferences, then navigate to the Camp page!");!function(){d.click();var e=setTimeout(function(){throw P.close(),clearInterval(n),alert("Initial XHR timed out! Please check your connection and try again."),new Error("Initial XHR timed out! Please check your connection and try again.")},i),n=setInterval(function(){document.querySelector("div.campPage-trap-itemBrowser.base")&&(clearTimeout(e),clearInterval(n),t())},100)}()}}();